<!DOCTYPE html>
<html>
<head>
	<title>Nivel 1 - Actividad 3</title>
	<link rel="stylesheet" type="text/css" href="../css/style.css">
	<script type="text/javascript" src="../js/funciones.js"></script>
	<link rel="stylesheet" type="text/css" href="../css/animacion.css">
	
	<script src="../js/jquery-3.1.1.js"></script>
	<script type="text/javascript"></script>
    <script src="../js/artyom.min.js"></script>
    <script src="../js/artyomCommands.js"></script>
    <script type="text/javascript" src="../js/cargaimg.js"></script>
</head>
<body onload="javascript: startArtyom()">
	<h1>Armar parejas</h1>
	<h1>Flopi y Tini tienen que agrupar las imagenes que empiezan con el mismo sonido</h1>
		
	<div style="width: 200px; height: 31px;"><h2>Tini: todo lo que empieza con A</h2>
	 	<div id="caja1" ondragenter="return enter(event)" ondragover="return over(event)" ondragleave="return leave(event)" ondrop="return drop(event)">
     	</div>
	</div>

    <div id="caja2" ondragenter="return enter(event)" ondragover="return over(event)" ondragleave="return leave(event)" ondrop="return drop(event)">
    </div>

	<br>
         <div id="caja3">
         	<img class="imgJuegos imagen" id="arrastrable1" draggable="true" ondragstart="start(event)" ondragend="end(event)">
         	<img class="imgJuegos imagen" id="arrastrable2" draggable="true" ondragstart="start(event)" ondragend="end(event)">
         	<img class="imgJuegos imagen" id="arrastrable3" draggable="true" ondragstart="start(event)" ondragend="end(event)">
         	<img class="imgJuegos imagen" id="arrastrable4" draggable="true" ondragstart="start(event)" ondragend="end(event)">

        </div>




   <div class="center">
          <button class="botonJuegos" onclick="javascript: comprobar4()"><img class="botonIJuegos" src="../img/comprobar.png"></button> <br>
        <button class="botonJuegos" onclick="confirmSalida()"><img src="../img/salir.png" class="botonIJuegos"></button>
    </div>
<style type="text/css">


#caja1, #caja2 {
    float: left;
    width: 200px;
    height: 200px;
    padding: 10px;
    margin: 10px;
}


#caja1 {
    background: #5f5;
    border: solid grey;
    border-radius: 4px;
}

#caja2 {
    background: #f55;
    border: solid grey;
    border-radius: 4px;
}
</style>

<script type="text/javascript">

        contador = 0; // Variable global para tener poder poner un id unico a cada elemento cuando se clona.

        function start(e) {
            e.dataTransfer.effecAllowed = 'move'; // Define el efecto como mover (Es el por defecto)
            e.dataTransfer.setData("Data", e.target.id); // Coje el elemento que se va a mover
            e.dataTransfer.setDragImage(e.target, 0, 0); // Define la imagen que se vera al ser arrastrado el elemento y por donde se coje el elemento que se va a mover (el raton aparece en la esquina sup_izq con 0,0)
            e.target.style.opacity = '0.4'; 
        }

        function end(e){
            e.target.style.opacity = ''; // Pone la opacidad del elemento a 1           
            e.dataTransfer.clearData("Data");
        }

        function enter(e) {
            e.target.style.border = '3px dotted #555'; 
        }

        function leave(e) {
            e.target.style.border = ''; 
        }

        function over(e) {
            var elemArrastrable = e.dataTransfer.getData("Data"); // Elemento arrastrado
            var id = e.target.id; // Elemento sobre el que se arrastra
            
            // return false para que se pueda soltar

            if (id == 'caja1'){
                return false;  
            }   

            if (id == 'caja2')
                return false;
            }

    
        /**
        * 
        * Mueve el elemento
        *
        **/
        function drop(e){

            var elementoArrastrado = e.dataTransfer.getData("Data"); // Elemento arrastrado
            e.target.appendChild(document.getElementById(elementoArrastrado));
          
            tamContX = $('#'+e.target.id).width();
            tamContY = $('#'+e.target.id).height();

            tamElemX = $('#'+elementoArrastrado).width('50px');
            tamElemY = $('#'+elementoArrastrado).height('50px');
    
            posXCont = $('#'+e.target.id).position().left;
            posYCont = $('#'+e.target.id).position().top;

            // Posicion absoluta del raton
            x = e.layerX;
            y = e.layerY;

            // Si parte del elemento que se quiere mover se queda fuera se cambia las coordenadas para que no sea asi
            if (posXCont + tamContX <= x + tamElemX){
                x = posXCont + tamContX - tamElemX;
            }

            if (posYCont + tamContY <= y + tamElemY){
                y = posYCont + tamContY - tamElemY;
            }

            document.getElementById(elementoArrastrado).style.position = "absolute";
            document.getElementById(elementoArrastrado).style.left = x + "px";
            document.getElementById(elementoArrastrado).style.top = y + "px";
        }
    </script>
</body>
</html>